<!DOCTYPE html>
<html>
  <head>
    <title>Registration</title>
    <style>
      input[type="file"]::file-selector-button {
        margin-right: 20px;
        border: none;
        background: #084cdf;
        padding: 10px 20px;
        border-radius: 10px;
        color: #fff;
        cursor: pointer;
        transition: background 0.2s ease-in-out;
      }

      input[type="file"]::file-selector-button:hover {
        background: #0d45a5;
      }
      img {
        height: 60px;
        width: 60px;
      }
    </style>
  </head>
  <body
    style="
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #296ef8;
    "
  >
    <div
      style="
        display: block;

        background-color: #332d2d;
        color: white;
        height: 85%;
        width: 500px;
        border-radius: 10px;
      "
    >
      <div style="display: flex; align-items: center; justify-content: center">
        <h1>REGISTER</h1>
      </div>

      <% if (error) { %>
      <p><%= error %></p>
      <% } %>
      <div style="margin-top: 15px; height: auto">
        <form action="/register" method="POST" enctype="multipart/form-data">
          <div
            style="display: flex; align-items: center; justify-content: center"
          >
            <input
              type="text"
              id="name"
              name="name"
              placeholder="Name"
              required
              style="
                height: 35px;
                width: 350px;
                background-color: #332d2d;
                outline: none;
                border: 1px solid white;
                color: white;
                font-size: 20px;
                border-radius: 4px;
                padding: 5px;
              "
            />
          </div>
          <br />

          <div
            style="display: flex; align-items: center; justify-content: center"
          >
            <input
              type="text"
              id="address"
              name="address"
              placeholder="Address"
              required
              style="
                height: 35px;
                width: 350px;
                background-color: #332d2d;
                outline: none;
                border: 1px solid white;
                color: white;
                font-size: 20px;
                border-radius: 4px;
                padding: 5px;
              "
            />
          </div>
          <br />

          <div
            style="display: flex; align-items: center; justify-content: center"
          >
            <input
              type="text"
              id="sdt"
              name="sdt"
              placeholder="Phone"
              required
              style="
                height: 35px;
                width: 350px;
                background-color: #332d2d;
                outline: none;
                border: 1px solid white;
                color: white;
                font-size: 20px;
                border-radius: 4px;
                padding: 5px;
              "
            />
          </div>
          <br />

          <div
            style="display: flex; align-items: center; justify-content: center"
          >
            <input
              type="email"
              id="email"
              name="email"
              placeholder="Email"
              required
              style="
                height: 35px;
                width: 350px;
                background-color: #332d2d;
                outline: none;
                border: 1px solid white;
                color: white;
                font-size: 20px;
                border-radius: 4px;
                padding: 5px;
              "
            />
          </div>
          <br />
          <div
            style="display: flex; align-items: center; justify-content: center"
          >
            <input
              type="password"
              id="password"
              name="password"
              placeholder="Password"
              required
              style="
                height: 35px;
                width: 350px;
                background-color: #332d2d;
                outline: none;
                border: 1px solid white;
                color: white;
                font-size: 20px;
                border-radius: 4px;
                padding: 5px;
              "
            />
          </div>
          <br />
          <div
            style="display: flex; align-items: center; justify-content: center"
          >
            <input
              type="file"
              id="image"
              name="image"
              required
              placeholder="Profile Image"
            />
            <div id="preview" style="width: 30px; height: 30px"></div>
          </div>
          <br />
          <div
            style="
              display: flex;
              align-items: center;
              justify-content: center;
              margin-top: 40px;
            "
          >
            <button
              type="submit"
              style="
                width: 130px;
                height: 50px;
                font-size: 20px;
                padding-top: 10px;
                padding-bottom: 10px;
                cursor: pointer;
                background-color: transparent;
                outline: none;
                border: 2px solid white;
                color: white;
                border-radius: 4px;
              "
            >
              Register
            </button>
          </div>
        </form>
        <div
          style="
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 20px;
          "
        >
          <p>
            Do have an account?
            <a href="/loginForm" style="text-decoration: none; color: gainsboro"
              >Login</a
            >
          </p>
        </div>
      </div>
    </div>
    <script>
      // Lấy đối tượng input và div preview
      const imageInput = document.getElementById("image");
      const preview = document.getElementById("preview");

      // Thêm sự kiện onchange cho input
      imageInput.addEventListener("change", function (event) {
        // Lấy danh sách các tệp tin đã chọn
        const fileList = event.target.files;

        // Kiểm tra xem có tệp tin nào được chọn hay không
        if (fileList.length > 0) {
          // Lấy tệp tin đầu tiên từ danh sách
          const file = fileList[0];

          // Kiểm tra xem tệp tin có phải là hình ảnh hay không
          if (file.type.startsWith("image/")) {
            // Tạo đối tượng FileReader để đọc nội dung của tệp tin
            const reader = new FileReader();

            // Thiết lập sự kiện khi đọc hoàn thành
            reader.onload = function () {
              // Tạo đối tượng hình ảnh
              const image = new Image();
              image.src = reader.result;

              // Thêm hình ảnh vào div preview
              preview.innerHTML = "";
              preview.appendChild(image);
            };

            // Đọc nội dung của tệp tin dưới dạng URL
            reader.readAsDataURL(file);
          } else {
            // Nếu tệp tin không phải là hình ảnh, hiển thị thông báo lỗi
            preview.innerHTML = "Không phải là hình ảnh!";
          }
        } else {
          // Nếu không có tệp tin nào được chọn, xóa hình ảnh khỏi div preview
          preview.innerHTML = "";
        }
      });
    </script>
  </body>
</html>
